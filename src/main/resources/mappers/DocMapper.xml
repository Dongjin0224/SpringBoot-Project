<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.test.mappers.DocMapper">
    <insert id="DocSignUp">
      INSERT INTO TABLE_DOC
    (
    docNo, docId, docPw, docName, docMajor, docHospitalName, docHosPhone, docLat, docLng, docAddress, docEmail,
    docPhoneNum
    )
    VALUES(
    SEQ_USER.NEXTVAL, #{docId}, #{docPw}, #{docName}, #{docMajor}, #{docHospitalName}, #{docHosPhone}, #{docLat},
    #{docLng}, #{docAddress}, #{docEmail}, #{docPhoneNum}
    )
   </insert>
    <insert id="insertSelectKey_bno">
        /*태그 안에서는 이와 같은 주석으로 사용해야 한다.*/
        /*게시글 등록 전 다음 시퀀스를 가져와서 insertSelectKey_bno메소드의 매개변수로 매핑후 전달한다.*/
        <selectKey keyProperty="docNo" order="BEFORE" resultType="long">
            SELECT SEQ_DOC.NEXTVAL FROM DUAL
        </selectKey>
        /*위에서 전달받은 bno를 사용한다.*/
        INSERT INTO TABLE_DOC (docNo, docId, docPw, docName, docMajor, docHospitalName, docHosPhone, docLat, docLng, docAddress, docEmail,
        docPhoneNum)
        VALUES(#{docNo} ,#{docId}, #{docPw}, #{docName}, #{docMajor}, #{docHospitalName}, #{docHosPhone}, #{docLat},
        #{docLng}, #{docAddress}, #{docEmail}, #{docPhoneNum})
    </insert>

    <select id="docLogin" resultType="DocVO">
        SELECT * FROM TABLE_DOC WHERE DOCID = #{docId} AND DOCPW =#{docPw}
    </select>
</mapper>

